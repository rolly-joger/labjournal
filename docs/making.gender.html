<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2024-10-16" />

<title>Making Gender</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Workshop Content
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Week1.html">Week 1</a>
    </li>
    <li>
      <a href="Week2.html">Week 2</a>
    </li>
    <li>
      <a href="Week3Webscraping.html">Week 3</a>
    </li>
    <li>
      <a href="Graphs2.html">Week 4</a>
    </li>
    <li>
      <a href="visualise.og.data.html">Week 5</a>
    </li>
    <li>
      <a href="week6.html">Week 6</a>
    </li>
    <li>
      <a href="week7.html">Week 7</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Dataprep
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="dataprep.final.html">The Data</a>
    </li>
    <li>
      <a href="making.gender.html">Making Gender</a>
    </li>
    <li>
      <a href="making.ethnicity.html">Making Ethnicity</a>
    </li>
    <li>
      <a href="h.index.html">h-Index</a>
    </li>
    <li>
      <a href="full.and.final.data.html">Final Dataset</a>
    </li>
    <li>
      <a href="all.descriptives.html">Descriptives</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    First Drafts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="JournalWeekTwo.html">Introduction First Draft</a>
    </li>
    <li>
      <a href="IntroRSQ.html">Introduction, Revised</a>
    </li>
    <li>
      <a href="outline.final.paper.html">Preliminary Outline</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Final 'Paper'
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="final.intro.html">Introduction</a>
    </li>
    <li>
      <a href="final.tk.html">Theoretical Framework</a>
    </li>
    <li>
      <a href="final.datamethods.html">Data and Methods</a>
    </li>
    <li>
      <a href="final.descriptives.for.paper.html">Descriptive Analysis</a>
    </li>
    <li>
      <a href="explanatory.rsq.answer.html">RSiena Analysis</a>
    </li>
    <li>
      <a href="final.concl.disc.html">Conclusions</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JochemTolsma/labjournal">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Making Gender</h1>
<h4 class="date">2024-10-16</h4>

</div>


<div id="the-data" class="section level1" number="1">
<h1><span class="header-section-number">1</span> The Data</h1>
<p>In order to facilitate the answering of the questions we have
formulated, some data-wrangling has to be done first. We’re going to use
our data on the demographics of our sample of scientists to assess,
first, their gender, and then their ethnicity.</p>
</div>
<div id="data-transformation-get-some-gender" class="section level1"
number="2">
<h1><span class="header-section-number">2</span> Data Transformation –
Get Some Gender</h1>
<p>Having loaded the data into out Global Environment, we can now
extract the first thing we are going to need in order to be able to
ascertain each individual’s gender, based on their first names.</p>
<pre class="r"><code>head(demographics) #so what does our demographics data look like </code></pre>
<pre><code>## # A tibble: 6 × 21
##   Naam              Universiteit.22 `Email-adres.22` Functie.22 `Google Scholar id.22` discipline.22
##   &lt;chr&gt;             &lt;chr&gt;           &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;                  &lt;chr&gt;        
## 1 Ece Arat          UU              e.arat@uu.nl     PhD Stude… _MW2-cgAAAAJ&amp;hl        sociology    
## 2 Marcel Van Assen  UU              m.a.l.m.vanasse… Bijzonder… uwPhxMcAAAAJ           sociology    
## 3 Weverthon Barbos… UU              w.barbosamachad… Onderzoek… miJiVQcAAAAJ           sociology    
## 4 Vardan Barsegyan  UU              v.m.barsegyan@u… Onderzoek… yh5pBBoAAAAJ           sociology    
## 5 Anne Brons        UU              m.d.brons@uu.nl  Onderzoek… &lt;NA&gt;                   sociology    
## 6 Vincent Buskens   UU              v.buskens@uu.nl  Hoogleraar ITE9bHMAAAAJ           sociology    
## # ℹ 15 more variables: Specialisatie.22 &lt;chr&gt;, year.22 &lt;dbl&gt;, Universiteit1.22 &lt;chr&gt;,
## #   Universiteit2.22 &lt;chr&gt;, Universiteit.24 &lt;chr&gt;, `Email-adres.24` &lt;chr&gt;, Functie.24 &lt;chr&gt;,
## #   `Google Scholar id.24` &lt;chr&gt;, discipline.24 &lt;chr&gt;, Specialisatie.24 &lt;chr&gt;, year.24 &lt;dbl&gt;,
## #   Universiteit1.24 &lt;chr&gt;, Universiteit2.24 &lt;chr&gt;, no_oa_id &lt;dbl&gt;, au_id &lt;chr&gt;</code></pre>
<pre class="r"><code>#then we create a vector of all names
names_NL &lt;- demographics$Naam
#and split names in &#39;first&#39; and &#39;last&#39;
names_sep &lt;- stringr::str_split_fixed(names_NL, &quot;\\s&quot;, 2) #note: this is not perfect, the dutch have some fascinating &#39;tussenvoegsels&#39;, but that&#39;s something we&#39;re going to have to deal with one&#39;s we get to the ethnicity thing. 
names_sep &lt;- as.data.frame(names_sep) #then we create a df with the seperated names t
au_id &lt;- demographics$au_id #we&#39;ll also extract their openalex id to add to the df
names &lt;- cbind(names_sep, au_id) #and col.bind this openalex id with the the seperate names 
view(names) #look if all&#39;s gone well

names &lt;- names %&gt;% #then, to make things a bit easier to understand later on, we rename the variables
  rename(
    first_name = V1,
    last_name = V2
  )
#and then we change the value lables, so it&#39;s even easier to understand 
var_label(names$first_name) &lt;- &quot;A person&#39;s first name&quot; 
var_label(names$last_name) &lt;- &quot;A person&#39;s last name&quot;
var_label(names$au_id) &lt;- &quot;One&#39;s OpenAlex ID&quot;
view(names)</code></pre>
<p>Having prepped the data, we are now going to use a wrapper for the
GenderizeR api, to assess the gender of all first names.</p>
<pre class="r"><code>library(genderizeR) #load the package</code></pre>
<pre><code>## 
## Welcome to genderizeR package version: 2.1.1</code></pre>
<pre><code>## 
## Homepage: http://www.wais.kamil.rzeszow.pl/genderizeR</code></pre>
<pre><code>## 
## Changelog: news(package = &#39;genderizeR&#39;)</code></pre>
<pre><code>## Help &amp; Contact: help(genderizeR)</code></pre>
<pre><code>## 
## If you find this package useful cite it please. Thank you!</code></pre>
<pre><code>## See: citation(&#39;genderizeR&#39;)</code></pre>
<pre><code>## 
## To suppress this message use:
## suppressPackageStartupMessages(library(genderizeR))</code></pre>
<pre class="r"><code>#only small chunks of names work, large one&#39;s don&#39;t 
gendered_names_1 &lt;- genderizeAPI(names$first_name[c(1:10)], country = NULL, ssl.verifypeer = T ) #we can only ask for 100 names a day, so we&#39;re doing the first 100
gendered_names_2 &lt;- genderizeAPI(names$first_name[c(11:20)], country = NULL, ssl.verifypeer = T )
gendered_names_3 &lt;- genderizeAPI(names$first_name[c(21:30)], country = NULL, ssl.verifypeer = T )
gendered_names_4 &lt;- genderizeAPI(names$first_name[c(31:40)], country = NULL, ssl.verifypeer = T )
gendered_names_5 &lt;- genderizeAPI(names$first_name[c(41:50)], country = NULL, ssl.verifypeer = T )
gendered_names_6 &lt;- genderizeAPI(names$first_name[c(51:60)], country = NULL, ssl.verifypeer = T )
gendered_names_7 &lt;- genderizeAPI(names$first_name[c(61:70)], country = NULL, ssl.verifypeer = T )
gendered_names_8 &lt;- genderizeAPI(names$first_name[c(71:80)], country = NULL, ssl.verifypeer = T )
gendered_names_9 &lt;- genderizeAPI(names$first_name[c(81:90)], country = NULL, ssl.verifypeer = T )
gendered_names_10 &lt;- genderizeAPI(names$first_name[c(91:100)], country = NULL, ssl.verifypeer = T )

#let&#39;s look at the names and see if we can find some edge-cases: aka names that might not be 
#decidedly male or female, so we can check them, and change them by hand if necessary
gendered_names_1</code></pre>
<pre><code>## $response
##      count      name gender probability
##      &lt;int&gt;    &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1:  24160       Ece female        0.96
##  2: 144026    Marcel   male        0.98
##  3:     16 Weverthon   male        1.00
##  4:   2745    Vardan   male        1.00
##  5: 589293      Anne female        0.99
##  6: 434587   Vincent   male        0.99
##  7: 127123    Tobias   male        1.00
##  8:    167     Rense   male        0.95
##  9:  29745   Marleen female        1.00
## 10: 483014     Lucas   male        0.99
## 
## $limitLeft
## [1] 90
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_2 #edgecase: antonie</code></pre>
<pre><code>## $response
##       count      name gender probability
##       &lt;int&gt;    &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1:  925951 Christian   male        0.99
##  2:  600856     Paula female        0.99
##  3:  581103       Eva female        0.99
##  4:  125453  Matthias   male        1.00
##  5:    1784   Antonie   male        0.55
##  6: 3489607     David   male        1.00
##  7:  112412       Lea female        0.98
##  8:    5526   Mathijs   male        1.00
##  9: 1342963     Marco   male        1.00
## 10:  112844     Tanja female        0.99
## 
## $limitLeft
## [1] 80
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_3 #edgecase: deni</code></pre>
<pre><code>## $response
##       count     name gender probability
##       &lt;int&gt;   &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1:   18005    Ineke female        1.00
##  2: 2315697      Ana female        0.92
##  3:    5505     Luuk   male        0.99
##  4:    9292     Deni   male        0.65
##  5:   10368 Christof   male        1.00
##  6:  578080      Amy female        0.99
##  7:  198519    Amina female        0.96
##  8:   19683   Kasper   male        0.99
##  9:     383   Jiamin female        0.82
## 10:  210690  Paulina female        0.99
## 
## $limitLeft
## [1] 70
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_4</code></pre>
<pre><code>## $response
##     count       name gender probability
##     &lt;int&gt;     &lt;char&gt; &lt;char&gt;       &lt;num&gt;
## 1:  30319     Wojtek   male        1.00
## 2: 589293       Anne female        0.99
## 3:  69224     Werner   male        1.00
## 4:  11016      Stijn   male        0.99
## 5:  71557    Philipp   male        1.00
## 6:   1598 Jan-Willem   male        1.00
## 7:  15492    Sanjana female        0.99
## 8: 116243        Jos   male        0.97
## 9:   5699       Tali female        0.82
## 
## $limitLeft
## [1] 60
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_5</code></pre>
<pre><code>## $response
##       count     name gender probability
##       &lt;int&gt;   &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1:  196245      Kim female        0.75
##  2:  679228    Frank   male        1.00
##  3:  334469 Isabelle female        0.99
##  4:     629      Cok   male        0.75
##  5:   73492   Jeroen   male        1.00
##  6: 1257153    Kevin   male        1.00
##  7:  477930     Nick   male        0.99
##  8:   41716    Sofie female        0.99
##  9:  311164   Ronald   male        1.00
## 10:  181197    Katia female        0.99
## 
## $limitLeft
## [1] 50
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_6</code></pre>
<pre><code>## $response
##      count       name gender probability
##      &lt;int&gt;     &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1:   1364      Hidde   male        0.99
##  2:   1535    Lonneke female        1.00
##  3:   1998 Lieselotte female        0.99
##  4: 362047        Rob   male        1.00
##  5: 112532    Maurice   male        0.99
##  6:  14973      Nella female        0.99
##  7:  49384     Saskia female        0.99
##  8:   3705   Margriet female        0.99
##  9:  10915      Remco   male        1.00
## 10:  43994        Bas   male        0.52
## 
## $limitLeft
## [1] 40
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_7</code></pre>
<pre><code>## $response
##       count    name gender probability
##       &lt;int&gt;  &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1:  239382  Judith female        1.00
##  2:     399 Gerbert   male        0.98
##  3:   21182    Roza female        0.95
##  4: 2530843 Michael   male        1.00
##  5:    8264    Peer   male        0.98
##  6:   58418   Niels   male        1.00
##  7:    3001  Jochem   male        0.99
##  8:  204435   Ellen female        1.00
##  9: 1378167    Mark   male        1.00
## 10:   36597 Maarten   male        1.00
## 
## $limitLeft
## [1] 30
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_8</code></pre>
<pre><code>## $response
##      count    name gender probability
##      &lt;int&gt;  &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1:   1293 Carlijn female        1.00
##  2: 362047     Rob   male        1.00
##  3: 742960 Mustafa   male        0.99
##  4:  56349    Inge female        0.98
##  5:    949 Thijmen   male        0.99
##  6: 509812  Rachel female        1.00
##  7:  55010     Nik   male        0.87
##  8:  10635   Renae female        1.00
##  9:  21136  Maikel   male        0.99
## 10:  52411   Carly female        0.99
## 
## $limitLeft
## [1] 20
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_9</code></pre>
<pre><code>## $response
##       count   name gender probability
##       &lt;int&gt; &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1:  589293   Anne female        0.99
##  2:   58968 Katrin female        0.99
##  3:   24882  Klara female        0.99
##  4:    3549 Marlou female        0.91
##  5: 1467183   Sara female        0.98
##  6:    8129  Janos   male        0.99
##  7:     176 Jansje female        0.98
##  8:    3699  Elize female        0.97
##  9:    1152 Tijmen   male        1.00
## 10:  211198   Carl   male        1.00
## 
## $limitLeft
## [1] 10
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<pre class="r"><code>gendered_names_10</code></pre>
<pre><code>## $response
##       count    name gender probability
##       &lt;int&gt;  &lt;char&gt; &lt;char&gt;       &lt;num&gt;
##  1: 1470730    Paul   male        1.00
##  2:    7130   Malou female        0.93
##  3:  144026  Marcel   male        0.98
##  4:     633  Josien female        0.97
##  5:    1293 Carlijn female        1.00
##  6:   61086 Evelyne female        0.99
##  7:    4423  Nienke female        1.00
##  8:   18322   Thijs   male        1.00
##  9: 3489607   David   male        1.00
## 10: 1283097   Sarah female        0.99
## 
## $limitLeft
## [1] 0
## 
## $limit
## [1] 100
## 
## $limitReset
## numeric(0)</code></pre>
<p>The thing with GenderizeR, however, is that one is – as previously
noted – limited to a 100 names a day, at least, in the free version.
Paying for the possiblity to assess the gender of more names was
something that I briefly considered, but it eventually looked like a
waste of money – because we can also write our own function.<br />
<br />
</p>
</div>
<div id="scrape-data-with-function" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Scrape Data With
Function</h1>
<p>Well … other people can write a function we can use. <span
class="citation">@nielsvullings</span> has created the following
function, which can be used to assign a gender score to each name, based
on Meertens name-repository.</p>
<pre class="r"><code>x &lt;- data.frame(Naam = demographics$Naam)

first_name &lt;- sapply(strsplit(x$Naam, &quot; &quot;), `[`, 1)  # This code should work as a way to extract first names from the ego characteristics dataset



df_names &lt;- data.frame(x, first_name, male = NA, female = NA)  # seem to have worked

head(df_names)</code></pre>
<pre><code>##                        Naam first_name male female
## 1                  Ece Arat        Ece   NA     NA
## 2          Marcel Van Assen     Marcel   NA     NA
## 3 Weverthon Barbosa Machado  Weverthon   NA     NA
## 4          Vardan Barsegyan     Vardan   NA     NA
## 5                Anne Brons       Anne   NA     NA
## 6           Vincent Buskens    Vincent   NA     NA</code></pre>
<pre class="r"><code>i &lt;- 1
df_names$first_name[i]</code></pre>
<pre><code>## [1] &quot;Ece&quot;</code></pre>
<pre class="r"><code>gender_scraper.NV &lt;- function(names = &quot;names element&quot;, web_page = &quot;https://nvb.meertens.knaw.nl/naam/is/&quot;) {
  
  names$first_name &lt;- sapply(strsplit(names$Naam, &quot; &quot;), `[`, 1)  # This code should work as a way to extract first names from the ego characteristics dataset
  names$male &lt;- NA
  names$female &lt;- NA
  
  for (i in 1:nrow(names)) {
    
    # print(names$first_name[i])
    
    web_page &lt;- read_html(paste0(&quot;https://nvb.meertens.knaw.nl/naam/is/&quot;, names$first_name[i]))
    
    table &lt;- web_page %&gt;%
      rvest::html_elements(&quot;body&quot;) %&gt;%
      rvest::html_elements(&quot;table&quot;) %&gt;%
      rvest::html_table()
    
    if (length(table) == 0) {
      
      print(length(table))
      
      names$male[i] &lt;- NA
      names$female[i] &lt;- NA
      
    } else {
      
      # print(table) print(table[[1]][[2,3]]) # Check if values for male are coherent and
      # accurate print(table[[1]][[6,3]]) # Check if values for female are coherent and
      # accurate
      
      names$male[i] &lt;- as.numeric(ifelse(table[[1]][[2, 3]] == &quot;--&quot;, 0, table[[1]][[2, 3]]))  # Make sure non-occurences are not registered as &#39;--&#39;
      names$female[i] &lt;- as.numeric(ifelse(table[[1]][[6, 3]] == &quot;--&quot;, 0, table[[1]][[6, 3]]))  # Make sure non-occurences are not registered as &#39;--&#39;
      
    }
    
  }  # end forloop
  
  names &lt;- names %&gt;%
    mutate(perc_female = case_when(is.na(female == TRUE) &amp; is.na(male) == TRUE ~ NA, is.na(female) ==
                                     TRUE ~ 0, is.na(male == TRUE) ~ 1, .default = round((female/(male + female)), 2))) %&gt;%
    select(!c(male, female, first_name))
  
  return(names)
  
  
}  # end function</code></pre>
<p>… implement the function/test/apply the function:</p>
<pre class="r"><code>gender_tested &lt;- gender_scraper.NV(names = demographics, web_page = &quot;https://nvb.meertens.knaw.nl/naam/is/&quot;)</code></pre>
<pre><code>## [1] 0
## [1] 0</code></pre>
<pre class="r"><code>gender_tested &lt;- gender_tested %&gt;%
  mutate(
    gender_binary = ifelse(perc_female &gt;= .5, 1, 0)
  )</code></pre>
<pre class="r"><code>write_csv(gender_tested, &quot;demographics_hannah.csv&quot;)</code></pre>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTWFraW5nIEdlbmRlciIKb3V0cHV0OiBodG1sX2RvY3VtZW50CmRhdGU6ICIyMDI0LTEwLTE2IgotLS0KYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9CmxpYnJhcnkobGFiZWxsZWQpCmxpYnJhcnkodGlkeXZlcnNlKQpyZXF1aXJlKGlncmFwaCkKcmVxdWlyZShzaGlueSkKcmVxdWlyZShSU2llbmEpCnJlcXVpcmUocm1kZm9ybWF0cykKcmVxdWlyZShwcmV0dHlkb2MpCnJlcXVpcmUoaHJicnRoZW1lcykKcmVxdWlyZSh0aW50KQpyZXF1aXJlKHR1ZnRlKQpyZXF1aXJlKHBzeWNoKQpsaWJyYXJ5KGRhdGEudGFibGUpICAKbGlicmFyeShydmVzdCkKbGlicmFyeSh4bWwyKQpsaWJyYXJ5KFhNTCkKYGBgCgpgYGB7ciBqb2NoZW0gZnVuY3Rpb25zLCBpbmNsdWRlID0gRiwgZWNobyA9IEZ9CmZwYWNrYWdlLmNoZWNrIDwtIGZ1bmN0aW9uKHBhY2thZ2VzKSB7CiAgbGFwcGx5KHBhY2thZ2VzLCBGVU4gPSBmdW5jdGlvbih4KSB7CiAgICBpZiAoIXJlcXVpcmUoeCwgY2hhcmFjdGVyLm9ubHkgPSBUUlVFKSkgewogICAgICBpbnN0YWxsLnBhY2thZ2VzKHgsIGRlcGVuZGVuY2llcyA9IFRSVUUpCiAgICAgIGxpYnJhcnkoeCwgY2hhcmFjdGVyLm9ubHkgPSBUUlVFKQogICAgfQogIH0pCn0KCmZzYXZlIDwtIGZ1bmN0aW9uKHgsIGZpbGUgPSBOVUxMLCBsb2NhdGlvbiA9ICIuL2RhdGEvcHJvY2Vzc2VkLyIpIHsKICBpZmVsc2UoIWRpci5leGlzdHMoImRhdGEiKSwgZGlyLmNyZWF0ZSgiZGF0YSIpLCBGQUxTRSkKICBpZmVsc2UoIWRpci5leGlzdHMoImRhdGEvcHJvY2Vzc2VkIiksIGRpci5jcmVhdGUoImRhdGEvcHJvY2Vzc2VkIiksIEZBTFNFKQogIGlmIChpcy5udWxsKGZpbGUpKQogICAgZmlsZSA9IGRlcGFyc2Uoc3Vic3RpdHV0ZSh4KSkKICBkYXRlbmFtZSA8LSBzdWJzdHIoZ3N1YigiWzotXSIsICIiLCBTeXMudGltZSgpKSwgMSwgOCkKICB0b3RhbG5hbWUgPC0gcGFzdGUobG9jYXRpb24sIGRhdGVuYW1lLCBmaWxlLCAiLnJkYSIsIHNlcCA9ICIiKQogIHNhdmUoeCwgZmlsZSA9IHRvdGFsbmFtZSkgICNuZWVkIHRvIGZpeCBpZiBmaWxlIGlzIHJlbG9hZGVkIGFzIGlucHV0IG5hbWUsIG5vdCBhcyB4LiAKfQoKZmxvYWQgPC0gZnVuY3Rpb24oZmlsZW5hbWUpIHsKICBsb2FkKGZpbGVuYW1lKQogIGdldChscygpW2xzKCkgIT0gImZpbGVuYW1lIl0pCn0KCmZzaG93ZGYgPC0gZnVuY3Rpb24oeCwgLi4uKSB7CiAga25pdHI6OmthYmxlKHgsIGRpZ2l0cyA9IDIsICJodG1sIiwgLi4uKSAlPiUKICAgIGthYmxlRXh0cmE6OmthYmxlX3N0eWxpbmcoYm9vdHN0cmFwX29wdGlvbnMgPSBjKCJzdHJpcGVkIiwgImhvdmVyIikpICU+JQogICAga2FibGVFeHRyYTo6c2Nyb2xsX2JveCh3aWR0aCA9ICIxMDAlIiwgaGVpZ2h0ID0gIjMwMHB4IikKfQoKZl9wdWJuZXRzIDwtIGZ1bmN0aW9uKGRmX3NjaG9sYXJzID0gZGYsIGxpc3RfcHVibGljYXRpb25zID0gcHVibGljYXRpb25zLCBkaXNjaXAgPSAic29jaW9sb2d5IiwgYWZmaWxpYXRpb24gPSAiUlUiLAogICAgICAgICAgICAgICAgICAgICAgd2F2ZXMgPSBsaXN0KHdhdmUxID0gYygyMDE4LCAyMDE5LCAyMDIwKSwgd2F2ZTIgPSBjKDIwMjEsIDIwMjIsIDIwMjMpKSkgewogIAogIHB1YmxpY2F0aW9ucyA8LSBsaXN0X3B1YmxpY2F0aW9ucyAlPiUKICAgIGJpbmRfcm93cygpICU+JQogICAgZGlzdGluY3QodGl0bGUsIC5rZWVwX2FsbCA9IFRSVUUpCiAgCiAgZGZfc2Nob2xhcnMgJT4lCiAgICBmaWx0ZXIoYWZmaWwxID09IGFmZmlsaWF0aW9uIHwgYWZmaWwyID09IGFmZmlsaWF0aW9uKSAlPiUKICAgIGZpbHRlcihkaXNjaXBsaW5lID09IGRpc2NpcCkgLT4gZGZfc2VsCiAgCiAgbmV0d29ya2xpc3QgPC0gbGlzdCgpCiAgZm9yICh3YXZlIGluIDE6bGVuZ3RoKHdhdmVzKSkgewogICAgbmV0d29ya2xpc3RbW3dhdmVdXSA8LSBtYXRyaXgoMCwgbnJvdyA9IG5yb3coZGZfc2VsKSwgbmNvbCA9IG5yb3coZGZfc2VsKSkKICB9CiAgCiAgcHVibGljYXRpb25saXN0IDwtIGxpc3QoKQogIGZvciAod2F2ZSBpbiAxOmxlbmd0aCh3YXZlcykpIHsKICAgIHB1YmxpY2F0aW9ubGlzdFtbd2F2ZV1dIDwtIHB1YmxpY2F0aW9ucyAlPiUKICAgICAgZmlsdGVyKGdzX2lkICVpbiUgZGZfc2VsJGdzX2lkKSAlPiUKICAgICAgZmlsdGVyKHllYXIgJWluJSB3YXZlc1tbd2F2ZV1dKSAlPiUKICAgICAgc2VsZWN0KGF1dGhvcikgJT4lCiAgICAgIGxhcHBseShzdHJfc3BsaXQsIHBhdHRlcm4gPSAiLCIpCiAgfQogIAogIHB1YmxpY2F0aW9ubGlzdDIgPC0gbGlzdCgpCiAgZm9yICh3YXZlIGluIDE6bGVuZ3RoKHdhdmVzKSkgewogICAgcHVibGljYXRpb25saXN0Mltbd2F2ZV1dIDwtIHB1YmxpY2F0aW9ubGlzdFtbd2F2ZV1dJGF1dGhvciAlPiUKICAgICAgIyBsb3dlcmNhc2UKICAgICAgbGFwcGx5KHRvbG93ZXIpICU+JQogICAgICAjIFJlbW92aW5nIGRpYWNyaXRpY3MKICAgICAgbGFwcGx5KHN0cmlfdHJhbnNfZ2VuZXJhbCwgaWQgPSAibGF0aW4tYXNjaWkiKSAlPiUKICAgICAgIyBvbmx5IGxhc3QgbmFtZQogICAgICBsYXBwbHkod29yZCwgc3RhcnQgPSAtMSwgc2VwID0gIiAiKSAlPiUKICAgICAgIyBvbmx5IGxhc3QgbGFzdCBuYW1lCiAgICAgIGxhcHBseSh3b3JkLCBzdGFydCA9IC0xLCBzZXAgPSAiLSIpCiAgfQogIAogIGZvciAod2F2ZSBpbiAxOmxlbmd0aCh3YXZlcykpIHsKICAgICMgbGV0IHVzIHJlbW92ZSBhbGwgcHVibGljYXRpb25zIHdpdGggb25seSBvbmUgYXV0aG9yCiAgICByZW1vdmUgPC0gd2hpY2goc2FwcGx5KHB1YmxpY2F0aW9ubGlzdDJbW3dhdmVdXSwgRlVOID0gZnVuY3Rpb24oeCkgbGVuZ3RoKHgpID09IDEpID09IFRSVUUpCiAgICBwdWJsaWNhdGlvbmxpc3QyW1t3YXZlXV0gPC0gcHVibGljYXRpb25saXN0Mltbd2F2ZV1dWy1yZW1vdmVdCiAgfQogIAogIGZvciAod2F2ZSBpbiAxOmxlbmd0aCh3YXZlcykpIHsKICAgIHB1YnMgPC0gcHVibGljYXRpb25saXN0Mltbd2F2ZV1dCiAgICBmb3IgKGVnbyBpbiAxOm5yb3coZGZfc2VsKSkgewogICAgICAjIHdoaWNoIGVnbz8KICAgICAgbGFzdG5hbWVfZWdvIDwtIGRmX3NlbCRsYXN0bmFtZVtlZ29dCiAgICAgICMgZm9yIGFsbCBwdWJsaWNhdGlvbnMKICAgICAgZm9yIChwdWIgaW4gMTpsZW5ndGgocHVicykpIHsKICAgICAgICAjIG9ubHkgY29udGludWUgaWYgZWdvIGlzIGF1dGhvciBvZiBwdWIKICAgICAgICBpZiAobGFzdG5hbWVfZWdvICVpbiUgcHVic1tbcHViXV0pIHsKICAgICAgICAgIGF1dF9wb3QgPC0gd2hpY2gubWF4KHB1YnNbW3B1Yl1dICVpbiUgbGFzdG5hbWVfZWdvKQogICAgICAgICAgIyBvbmx5IGNvbnRpbnVlIGlmIGVnbyBpcyBmaXJzdCBhdXRob3Igb2YgcHViCiAgICAgICAgICBpZiAoYXV0X3BvdCA9PSAxKSB7CiAgICAgICAgICAgICMgY2hlY2sgYWxsIGFsdGVycy9jby1hdXRob3JzCiAgICAgICAgICAgIGZvciAoYWx0ZXIgaW4gMTpucm93KGRmX3NlbCkpIHsKICAgICAgICAgICAgICAjIHdoaWNoIGFsdGVyCiAgICAgICAgICAgICAgbGFzdG5hbWVfYWx0ZXIgPC0gZGZfc2VsJGxhc3RuYW1lW2FsdGVyXQogICAgICAgICAgICAgIGlmIChsYXN0bmFtZV9hbHRlciAlaW4lIHB1YnNbW3B1Yl1dKSB7CiAgICAgICAgICAgICAgICBuZXR3b3JrbGlzdFtbd2F2ZV1dW2VnbywgYWx0ZXJdIDwtIG5ldHdvcmtsaXN0W1t3YXZlXV1bZWdvLCBhbHRlcl0gKyAxCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIHJldHVybihsaXN0KGRmID0gZGZfc2VsLCBuZXR3b3JrID0gbmV0d29ya2xpc3QpKQp9CgpmY29sbmV0IDwtIGZ1bmN0aW9uKGRhdGEgPSBzY2hvbGFycywgdW5pdmVyc2l0eSA9ICJSVSIsIGRpc2NpcGxpbmUgPSAic29jaW9sb2d5Iiwgd2F2ZXMgPSBsaXN0KGMoMjAxNSwKICAgIDIwMTgpLCBjKDIwMTksIDIwMjMpKSwgdHlwZSA9IGMoImZpcnN0IikpIHsKCiAgICAjIHN0ZXAgMQogICAgZGVtb2dyYXBoaWNzIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgZGF0YSRkZW1vZ3JhcGhpY3MpCiAgICBkZW1vZ3JhcGhpY3MgPC0gZGVtb2dyYXBoaWNzICU+JQogICAgICAgIG11dGF0ZShVbml2ZXJzaXRlaXQxLjIyID0gcmVwbGFjZShVbml2ZXJzaXRlaXQxLjIyLCBpcy5uYShVbml2ZXJzaXRlaXQxLjIyKSwgIiIpLCBVbml2ZXJzaXRlaXQyLjIyID0gcmVwbGFjZShVbml2ZXJzaXRlaXQyLjIyLAogICAgICAgICAgICBpcy5uYShVbml2ZXJzaXRlaXQyLjIyKSwgIiIpLCBVbml2ZXJzaXRlaXQxLjI0ID0gcmVwbGFjZShVbml2ZXJzaXRlaXQxLjI0LCBpcy5uYShVbml2ZXJzaXRlaXQxLjI0KSwKICAgICAgICAgICAgIiIpLCBVbml2ZXJzaXRlaXQyLjI0ID0gcmVwbGFjZShVbml2ZXJzaXRlaXQyLjI0LCBpcy5uYShVbml2ZXJzaXRlaXQyLjI0KSwgIiIpLCBkaXNjaXBsaW5lLjIyID0gcmVwbGFjZShkaXNjaXBsaW5lLjIyLAogICAgICAgICAgICBpcy5uYShkaXNjaXBsaW5lLjIyKSwgIiIpLCBkaXNjaXBsaW5lLjI0ID0gcmVwbGFjZShkaXNjaXBsaW5lLjI0LCBpcy5uYShkaXNjaXBsaW5lLjI0KSwgIiIpKQoKICAgIHNhbXBsZSA8LSB3aGljaCgoZGVtb2dyYXBoaWNzJFVuaXZlcnNpdGVpdDEuMjIgJWluJSB1bml2ZXJzaXR5IHwgZGVtb2dyYXBoaWNzJFVuaXZlcnNpdGVpdDIuMjIgJWluJQogICAgICAgIHVuaXZlcnNpdHkgfCBkZW1vZ3JhcGhpY3MkVW5pdmVyc2l0ZWl0MS4yNCAlaW4lIHVuaXZlcnNpdHkgfCBkZW1vZ3JhcGhpY3MkVW5pdmVyc2l0ZWl0Mi4yNCAlaW4lCiAgICAgICAgdW5pdmVyc2l0eSkgJiAoZGVtb2dyYXBoaWNzJGRpc2NpcGxpbmUuMjIgJWluJSBkaXNjaXBsaW5lIHwgZGVtb2dyYXBoaWNzJGRpc2NpcGxpbmUuMjQgJWluJSBkaXNjaXBsaW5lKSkKCiAgICBkZW1vZ3JhcGhpY3Nfc29jIDwtIGRlbW9ncmFwaGljc1tzYW1wbGUsIF0KICAgIHNjaG9sYXJzX3NlbCA8LSBsYXBwbHkoc2Nob2xhcnMsICJbIiwgc2FtcGxlKQoKICAgICMgc3RlcCAyCiAgICBpZHMgPC0gZGVtb2dyYXBoaWNzX3NvYyRhdV9pZAogICAgbndhdmVzIDwtIGxlbmd0aCh3YXZlcykKICAgIG5ldHMgPC0gYXJyYXkoMCwgZGltID0gYyhud2F2ZXMsIGxlbmd0aChpZHMpLCBsZW5ndGgoaWRzKSksIGRpbW5hbWVzID0gbGlzdCh3YXZlID0gMTpud2F2ZXMsIGlkcywKICAgICAgICBpZHMpKQogICAgZGltbmFtZXMobmV0cykKCiAgICAjIHN0ZXAgMwogICAgZGZfd29ya3MgPC0gdGliYmxlKHdvcmtzX2lkID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywgZnVuY3Rpb24obCkgbCRpZCkpLCB3b3Jrc19hdXRob3IgPSB1bmxpc3QobGFwcGx5KHNjaG9sYXJzX3NlbCR3b3JrLAogICAgICAgIGZ1bmN0aW9uKGwpIGwkYXV0aG9yKSwgcmVjdXJzaXZlID0gRkFMU0UpLCB3b3Jrc195ZWFyID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywgZnVuY3Rpb24obCkgbCRwdWJsaWNhdGlvbl95ZWFyKSwKICAgICAgICByZWN1cnNpdmUgPSBGQUxTRSkpCgogICAgZGZfd29ya3MgPC0gZGZfd29ya3NbIWR1cGxpY2F0ZWQoZGZfd29ya3MpLCBdCgogICAgIyBzdGVwIDQKICAgIGlmICh0eXBlID09ICJmaXJzdCIpIHsKICAgICAgICBmb3IgKGogaW4gMTpud2F2ZXMpIHsKICAgICAgICAgICAgZGZfd29ya3NfdyA8LSBkZl93b3Jrc1tkZl93b3JrcyR3b3Jrc195ZWFyID49IHdhdmVzW1tqXV1bMV0gJiBkZl93b3JrcyR3b3Jrc195ZWFyIDw9IHdhdmVzW1tqXV1bMl0sCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIGZvciAoaSBpbiAxOm5yb3coZGZfd29ya3NfdykpIHsKICAgICAgICAgICAgICAgIGVnbyA8LSBkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkWzFdCiAgICAgICAgICAgICAgICBhbHRlcnMgPC0gZGZfd29ya3NfdyR3b3Jrc19hdXRob3JbaV1bWzFdXSRhdV9pZFstMV0KICAgICAgICAgICAgICAgIGlmIChzdW0oaWRzICVpbiUgZWdvKSA+IDAgJiBzdW0oaWRzICVpbiUgYWx0ZXJzKSA+IDApIHsKICAgICAgICAgICAgICAgICAgbmV0c1tqLCB3aGljaChpZHMgJWluJSBlZ28pLCB3aGljaChpZHMgJWluJSBhbHRlcnMpXSA8LSAxCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgaWYgKHR5cGUgPT0gImxhc3QiKSB7CiAgICAgICAgZm9yIChqIGluIDE6bndhdmVzKSB7CiAgICAgICAgICAgIGRmX3dvcmtzX3cgPC0gZGZfd29ya3NbZGZfd29ya3Mkd29ya3NfeWVhciA+PSB3YXZlc1tbal1dWzFdICYgZGZfd29ya3Mkd29ya3NfeWVhciA8PSB3YXZlc1tbal1dWzJdLAogICAgICAgICAgICAgICAgXQogICAgICAgICAgICBmb3IgKGkgaW4gMTpucm93KGRmX3dvcmtzX3cpKSB7CiAgICAgICAgICAgICAgICBlZ28gPC0gcmV2KGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWQpWzFdCiAgICAgICAgICAgICAgICBhbHRlcnMgPC0gcmV2KGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWQpWy0xXQogICAgICAgICAgICAgICAgaWYgKHN1bShpZHMgJWluJSBlZ28pID4gMCAmIHN1bShpZHMgJWluJSBhbHRlcnMpID4gMCkgewogICAgICAgICAgICAgICAgICBuZXRzW2osIHdoaWNoKGlkcyAlaW4lIGVnbyksIHdoaWNoKGlkcyAlaW4lIGFsdGVycyldIDwtIDEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBpZiAodHlwZSA9PSAiYWxsIikgewogICAgICAgIGZvciAoaiBpbiAxOm53YXZlcykgewogICAgICAgICAgICBkZl93b3Jrc193IDwtIGRmX3dvcmtzW2RmX3dvcmtzJHdvcmtzX3llYXIgPj0gd2F2ZXNbW2pdXVsxXSAmIGRmX3dvcmtzJHdvcmtzX3llYXIgPD0gd2F2ZXNbW2pdXVsyXSwKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgZm9yIChpIGluIDE6bnJvdyhkZl93b3Jrc193KSkgewogICAgICAgICAgICAgICAgZWdvcyA8LSBkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkCiAgICAgICAgICAgICAgICBpZiAoc3VtKGlkcyAlaW4lIGVnb3MpID4gMCkgewogICAgICAgICAgICAgICAgICBuZXRzW2osIHdoaWNoKGlkcyAlaW4lIGVnb3MpLCB3aGljaChpZHMgJWluJSBlZ29zKV0gPC0gMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgb3V0cHV0IDwtIGxpc3QoKQogICAgb3V0cHV0JGRhdGEgPC0gc2Nob2xhcnNfc2VsCiAgICBvdXRwdXQkbmV0cyA8LSBuZXRzCiAgICByZXR1cm4ob3V0cHV0KQp9CgpgYGAKCmBgYHtyIGxvYWQgZGF0YTIsIGluY2x1ZGU9RkFMU0V9CmRlbW9ncmFwaGljcyA8LSByZWFkX3JkcygiZGVtb2dyYXBoaWNzX215X3Blb3BsZS5yZHMiKQpWaWV3KGRlbW9ncmFwaGljcykKYGBgCgojIFRoZSBEYXRhIAoKSW4gb3JkZXIgdG8gZmFjaWxpdGF0ZSB0aGUgYW5zd2VyaW5nIG9mIHRoZSBxdWVzdGlvbnMgd2UgaGF2ZSBmb3JtdWxhdGVkLCBzb21lIGRhdGEtd3JhbmdsaW5nIGhhcyB0byBiZSBkb25lIGZpcnN0LiBXZSdyZSBnb2luZyB0byB1c2Ugb3VyIGRhdGEgb24gdGhlIGRlbW9ncmFwaGljcyBvZiBvdXIgc2FtcGxlIG9mIHNjaWVudGlzdHMgdG8gYXNzZXNzLCBmaXJzdCwgdGhlaXIgZ2VuZGVyLCBhbmQgdGhlbiB0aGVpciBldGhuaWNpdHkuIAoKIyBEYXRhIFRyYW5zZm9ybWF0aW9uIC0tIEdldCBTb21lIEdlbmRlciAKCkhhdmluZyBsb2FkZWQgdGhlIGRhdGEgaW50byBvdXQgR2xvYmFsIEVudmlyb25tZW50LCB3ZSBjYW4gbm93IGV4dHJhY3QgdGhlIGZpcnN0IHRoaW5nIHdlIGFyZSBnb2luZyB0byBuZWVkIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gYXNjZXJ0YWluIGVhY2ggaW5kaXZpZHVhbCdzIGdlbmRlciwgYmFzZWQgb24gdGhlaXIgZmlyc3QgbmFtZXMuIAoKYGBge3Igc3BsaXQgbmFtZXN9CmhlYWQoZGVtb2dyYXBoaWNzKSAjc28gd2hhdCBkb2VzIG91ciBkZW1vZ3JhcGhpY3MgZGF0YSBsb29rIGxpa2UgCiN0aGVuIHdlIGNyZWF0ZSBhIHZlY3RvciBvZiBhbGwgbmFtZXMKbmFtZXNfTkwgPC0gZGVtb2dyYXBoaWNzJE5hYW0KI2FuZCBzcGxpdCBuYW1lcyBpbiAnZmlyc3QnIGFuZCAnbGFzdCcKbmFtZXNfc2VwIDwtIHN0cmluZ3I6OnN0cl9zcGxpdF9maXhlZChuYW1lc19OTCwgIlxccyIsIDIpICNub3RlOiB0aGlzIGlzIG5vdCBwZXJmZWN0LCB0aGUgZHV0Y2ggaGF2ZSBzb21lIGZhc2NpbmF0aW5nICd0dXNzZW52b2Vnc2VscycsIGJ1dCB0aGF0J3Mgc29tZXRoaW5nIHdlJ3JlIGdvaW5nIHRvIGhhdmUgdG8gZGVhbCB3aXRoIG9uZSdzIHdlIGdldCB0byB0aGUgZXRobmljaXR5IHRoaW5nLiAKbmFtZXNfc2VwIDwtIGFzLmRhdGEuZnJhbWUobmFtZXNfc2VwKSAjdGhlbiB3ZSBjcmVhdGUgYSBkZiB3aXRoIHRoZSBzZXBlcmF0ZWQgbmFtZXMgdAphdV9pZCA8LSBkZW1vZ3JhcGhpY3MkYXVfaWQgI3dlJ2xsIGFsc28gZXh0cmFjdCB0aGVpciBvcGVuYWxleCBpZCB0byBhZGQgdG8gdGhlIGRmCm5hbWVzIDwtIGNiaW5kKG5hbWVzX3NlcCwgYXVfaWQpICNhbmQgY29sLmJpbmQgdGhpcyBvcGVuYWxleCBpZCB3aXRoIHRoZSB0aGUgc2VwZXJhdGUgbmFtZXMgCnZpZXcobmFtZXMpICNsb29rIGlmIGFsbCdzIGdvbmUgd2VsbAoKbmFtZXMgPC0gbmFtZXMgJT4lICN0aGVuLCB0byBtYWtlIHRoaW5ncyBhIGJpdCBlYXNpZXIgdG8gdW5kZXJzdGFuZCBsYXRlciBvbiwgd2UgcmVuYW1lIHRoZSB2YXJpYWJsZXMKICByZW5hbWUoCiAgICBmaXJzdF9uYW1lID0gVjEsCiAgICBsYXN0X25hbWUgPSBWMgogICkKI2FuZCB0aGVuIHdlIGNoYW5nZSB0aGUgdmFsdWUgbGFibGVzLCBzbyBpdCdzIGV2ZW4gZWFzaWVyIHRvIHVuZGVyc3RhbmQgCnZhcl9sYWJlbChuYW1lcyRmaXJzdF9uYW1lKSA8LSAiQSBwZXJzb24ncyBmaXJzdCBuYW1lIiAKdmFyX2xhYmVsKG5hbWVzJGxhc3RfbmFtZSkgPC0gIkEgcGVyc29uJ3MgbGFzdCBuYW1lIgp2YXJfbGFiZWwobmFtZXMkYXVfaWQpIDwtICJPbmUncyBPcGVuQWxleCBJRCIKdmlldyhuYW1lcykKYGBgCgoKSGF2aW5nIHByZXBwZWQgdGhlIGRhdGEsIHdlIGFyZSBub3cgZ29pbmcgdG8gdXNlIGEgd3JhcHBlciBmb3IgdGhlIEdlbmRlcml6ZVIgYXBpLCB0byBhc3Nlc3MgdGhlIGdlbmRlciBvZiBhbGwgZmlyc3QgbmFtZXMuIAoKYGBge3IgZ2VuZGVyaXplIG5hbWVzfQpsaWJyYXJ5KGdlbmRlcml6ZVIpICNsb2FkIHRoZSBwYWNrYWdlCiNvbmx5IHNtYWxsIGNodW5rcyBvZiBuYW1lcyB3b3JrLCBsYXJnZSBvbmUncyBkb24ndCAKZ2VuZGVyZWRfbmFtZXNfMSA8LSBnZW5kZXJpemVBUEkobmFtZXMkZmlyc3RfbmFtZVtjKDE6MTApXSwgY291bnRyeSA9IE5VTEwsIHNzbC52ZXJpZnlwZWVyID0gVCApICN3ZSBjYW4gb25seSBhc2sgZm9yIDEwMCBuYW1lcyBhIGRheSwgc28gd2UncmUgZG9pbmcgdGhlIGZpcnN0IDEwMApnZW5kZXJlZF9uYW1lc18yIDwtIGdlbmRlcml6ZUFQSShuYW1lcyRmaXJzdF9uYW1lW2MoMTE6MjApXSwgY291bnRyeSA9IE5VTEwsIHNzbC52ZXJpZnlwZWVyID0gVCApCmdlbmRlcmVkX25hbWVzXzMgPC0gZ2VuZGVyaXplQVBJKG5hbWVzJGZpcnN0X25hbWVbYygyMTozMCldLCBjb3VudHJ5ID0gTlVMTCwgc3NsLnZlcmlmeXBlZXIgPSBUICkKZ2VuZGVyZWRfbmFtZXNfNCA8LSBnZW5kZXJpemVBUEkobmFtZXMkZmlyc3RfbmFtZVtjKDMxOjQwKV0sIGNvdW50cnkgPSBOVUxMLCBzc2wudmVyaWZ5cGVlciA9IFQgKQpnZW5kZXJlZF9uYW1lc181IDwtIGdlbmRlcml6ZUFQSShuYW1lcyRmaXJzdF9uYW1lW2MoNDE6NTApXSwgY291bnRyeSA9IE5VTEwsIHNzbC52ZXJpZnlwZWVyID0gVCApCmdlbmRlcmVkX25hbWVzXzYgPC0gZ2VuZGVyaXplQVBJKG5hbWVzJGZpcnN0X25hbWVbYyg1MTo2MCldLCBjb3VudHJ5ID0gTlVMTCwgc3NsLnZlcmlmeXBlZXIgPSBUICkKZ2VuZGVyZWRfbmFtZXNfNyA8LSBnZW5kZXJpemVBUEkobmFtZXMkZmlyc3RfbmFtZVtjKDYxOjcwKV0sIGNvdW50cnkgPSBOVUxMLCBzc2wudmVyaWZ5cGVlciA9IFQgKQpnZW5kZXJlZF9uYW1lc184IDwtIGdlbmRlcml6ZUFQSShuYW1lcyRmaXJzdF9uYW1lW2MoNzE6ODApXSwgY291bnRyeSA9IE5VTEwsIHNzbC52ZXJpZnlwZWVyID0gVCApCmdlbmRlcmVkX25hbWVzXzkgPC0gZ2VuZGVyaXplQVBJKG5hbWVzJGZpcnN0X25hbWVbYyg4MTo5MCldLCBjb3VudHJ5ID0gTlVMTCwgc3NsLnZlcmlmeXBlZXIgPSBUICkKZ2VuZGVyZWRfbmFtZXNfMTAgPC0gZ2VuZGVyaXplQVBJKG5hbWVzJGZpcnN0X25hbWVbYyg5MToxMDApXSwgY291bnRyeSA9IE5VTEwsIHNzbC52ZXJpZnlwZWVyID0gVCApCgojbGV0J3MgbG9vayBhdCB0aGUgbmFtZXMgYW5kIHNlZSBpZiB3ZSBjYW4gZmluZCBzb21lIGVkZ2UtY2FzZXM6IGFrYSBuYW1lcyB0aGF0IG1pZ2h0IG5vdCBiZSAKI2RlY2lkZWRseSBtYWxlIG9yIGZlbWFsZSwgc28gd2UgY2FuIGNoZWNrIHRoZW0sIGFuZCBjaGFuZ2UgdGhlbSBieSBoYW5kIGlmIG5lY2Vzc2FyeQpnZW5kZXJlZF9uYW1lc18xCmdlbmRlcmVkX25hbWVzXzIgI2VkZ2VjYXNlOiBhbnRvbmllCmdlbmRlcmVkX25hbWVzXzMgI2VkZ2VjYXNlOiBkZW5pCmdlbmRlcmVkX25hbWVzXzQKZ2VuZGVyZWRfbmFtZXNfNQpnZW5kZXJlZF9uYW1lc182CmdlbmRlcmVkX25hbWVzXzcKZ2VuZGVyZWRfbmFtZXNfOApnZW5kZXJlZF9uYW1lc185CmdlbmRlcmVkX25hbWVzXzEwCmBgYAoKClRoZSB0aGluZyB3aXRoIEdlbmRlcml6ZVIsIGhvd2V2ZXIsIGlzIHRoYXQgb25lIGlzIC0tIGFzIHByZXZpb3VzbHkgbm90ZWQgLS0gbGltaXRlZCB0byBhIDEwMCBuYW1lcyBhIGRheSwgYXQgbGVhc3QsIGluIHRoZSBmcmVlIHZlcnNpb24uIFBheWluZyBmb3IgdGhlIHBvc3NpYmxpdHkgdG8gYXNzZXNzIHRoZSBnZW5kZXIgb2YgbW9yZSBuYW1lcyB3YXMgc29tZXRoaW5nIHRoYXQgSSBicmllZmx5IGNvbnNpZGVyZWQsIGJ1dCBpdCBldmVudHVhbGx5IGxvb2tlZCBsaWtlIGEgd2FzdGUgb2YgbW9uZXkgLS0gYmVjYXVzZSB3ZSBjYW4gYWxzbyB3cml0ZSBvdXIgb3duIGZ1bmN0aW9uLlwKXAoKIyBTY3JhcGUgRGF0YSBXaXRoIEZ1bmN0aW9uIApXZWxsIC4uLiBvdGhlciBwZW9wbGUgY2FuIHdyaXRlIGEgZnVuY3Rpb24gd2UgY2FuIHVzZS4gQG5pZWxzdnVsbGluZ3MgaGFzIGNyZWF0ZWQgdGhlIGZvbGxvd2luZyBmdW5jdGlvbiwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gYXNzaWduIGEgZ2VuZGVyIHNjb3JlIHRvIGVhY2ggbmFtZSwgYmFzZWQgb24gTWVlcnRlbnMgbmFtZS1yZXBvc2l0b3J5LgoKYGBge3IgTmllbHMgZnVuY3Rpb259CnggPC0gZGF0YS5mcmFtZShOYWFtID0gZGVtb2dyYXBoaWNzJE5hYW0pCgpmaXJzdF9uYW1lIDwtIHNhcHBseShzdHJzcGxpdCh4JE5hYW0sICIgIiksIGBbYCwgMSkgICMgVGhpcyBjb2RlIHNob3VsZCB3b3JrIGFzIGEgd2F5IHRvIGV4dHJhY3QgZmlyc3QgbmFtZXMgZnJvbSB0aGUgZWdvIGNoYXJhY3RlcmlzdGljcyBkYXRhc2V0CgoKCmRmX25hbWVzIDwtIGRhdGEuZnJhbWUoeCwgZmlyc3RfbmFtZSwgbWFsZSA9IE5BLCBmZW1hbGUgPSBOQSkgICMgc2VlbSB0byBoYXZlIHdvcmtlZAoKaGVhZChkZl9uYW1lcykKCmkgPC0gMQpkZl9uYW1lcyRmaXJzdF9uYW1lW2ldCgpnZW5kZXJfc2NyYXBlci5OViA8LSBmdW5jdGlvbihuYW1lcyA9ICJuYW1lcyBlbGVtZW50Iiwgd2ViX3BhZ2UgPSAiaHR0cHM6Ly9udmIubWVlcnRlbnMua25hdy5ubC9uYWFtL2lzLyIpIHsKICAKICBuYW1lcyRmaXJzdF9uYW1lIDwtIHNhcHBseShzdHJzcGxpdChuYW1lcyROYWFtLCAiICIpLCBgW2AsIDEpICAjIFRoaXMgY29kZSBzaG91bGQgd29yayBhcyBhIHdheSB0byBleHRyYWN0IGZpcnN0IG5hbWVzIGZyb20gdGhlIGVnbyBjaGFyYWN0ZXJpc3RpY3MgZGF0YXNldAogIG5hbWVzJG1hbGUgPC0gTkEKICBuYW1lcyRmZW1hbGUgPC0gTkEKICAKICBmb3IgKGkgaW4gMTpucm93KG5hbWVzKSkgewogICAgCiAgICAjIHByaW50KG5hbWVzJGZpcnN0X25hbWVbaV0pCiAgICAKICAgIHdlYl9wYWdlIDwtIHJlYWRfaHRtbChwYXN0ZTAoImh0dHBzOi8vbnZiLm1lZXJ0ZW5zLmtuYXcubmwvbmFhbS9pcy8iLCBuYW1lcyRmaXJzdF9uYW1lW2ldKSkKICAgIAogICAgdGFibGUgPC0gd2ViX3BhZ2UgJT4lCiAgICAgIHJ2ZXN0OjpodG1sX2VsZW1lbnRzKCJib2R5IikgJT4lCiAgICAgIHJ2ZXN0OjpodG1sX2VsZW1lbnRzKCJ0YWJsZSIpICU+JQogICAgICBydmVzdDo6aHRtbF90YWJsZSgpCiAgICAKICAgIGlmIChsZW5ndGgodGFibGUpID09IDApIHsKICAgICAgCiAgICAgIHByaW50KGxlbmd0aCh0YWJsZSkpCiAgICAgIAogICAgICBuYW1lcyRtYWxlW2ldIDwtIE5BCiAgICAgIG5hbWVzJGZlbWFsZVtpXSA8LSBOQQogICAgICAKICAgIH0gZWxzZSB7CiAgICAgIAogICAgICAjIHByaW50KHRhYmxlKSBwcmludCh0YWJsZVtbMV1dW1syLDNdXSkgIyBDaGVjayBpZiB2YWx1ZXMgZm9yIG1hbGUgYXJlIGNvaGVyZW50IGFuZAogICAgICAjIGFjY3VyYXRlIHByaW50KHRhYmxlW1sxXV1bWzYsM11dKSAjIENoZWNrIGlmIHZhbHVlcyBmb3IgZmVtYWxlIGFyZSBjb2hlcmVudCBhbmQKICAgICAgIyBhY2N1cmF0ZQogICAgICAKICAgICAgbmFtZXMkbWFsZVtpXSA8LSBhcy5udW1lcmljKGlmZWxzZSh0YWJsZVtbMV1dW1syLCAzXV0gPT0gIi0tIiwgMCwgdGFibGVbWzFdXVtbMiwgM11dKSkgICMgTWFrZSBzdXJlIG5vbi1vY2N1cmVuY2VzIGFyZSBub3QgcmVnaXN0ZXJlZCBhcyAnLS0nCiAgICAgIG5hbWVzJGZlbWFsZVtpXSA8LSBhcy5udW1lcmljKGlmZWxzZSh0YWJsZVtbMV1dW1s2LCAzXV0gPT0gIi0tIiwgMCwgdGFibGVbWzFdXVtbNiwgM11dKSkgICMgTWFrZSBzdXJlIG5vbi1vY2N1cmVuY2VzIGFyZSBub3QgcmVnaXN0ZXJlZCBhcyAnLS0nCiAgICAgIAogICAgfQogICAgCiAgfSAgIyBlbmQgZm9ybG9vcAogIAogIG5hbWVzIDwtIG5hbWVzICU+JQogICAgbXV0YXRlKHBlcmNfZmVtYWxlID0gY2FzZV93aGVuKGlzLm5hKGZlbWFsZSA9PSBUUlVFKSAmIGlzLm5hKG1hbGUpID09IFRSVUUgfiBOQSwgaXMubmEoZmVtYWxlKSA9PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVFJVRSB+IDAsIGlzLm5hKG1hbGUgPT0gVFJVRSkgfiAxLCAuZGVmYXVsdCA9IHJvdW5kKChmZW1hbGUvKG1hbGUgKyBmZW1hbGUpKSwgMikpKSAlPiUKICAgIHNlbGVjdCghYyhtYWxlLCBmZW1hbGUsIGZpcnN0X25hbWUpKQogIAogIHJldHVybihuYW1lcykKICAKICAKfSAgIyBlbmQgZnVuY3Rpb24KYGBgCgouLi4gaW1wbGVtZW50IHRoZSBmdW5jdGlvbi90ZXN0L2FwcGx5IHRoZSBmdW5jdGlvbjogCmBgYHtyfQpnZW5kZXJfdGVzdGVkIDwtIGdlbmRlcl9zY3JhcGVyLk5WKG5hbWVzID0gZGVtb2dyYXBoaWNzLCB3ZWJfcGFnZSA9ICJodHRwczovL252Yi5tZWVydGVucy5rbmF3Lm5sL25hYW0vaXMvIikKZ2VuZGVyX3Rlc3RlZCA8LSBnZW5kZXJfdGVzdGVkICU+JQogIG11dGF0ZSgKICAgIGdlbmRlcl9iaW5hcnkgPSBpZmVsc2UocGVyY19mZW1hbGUgPj0gLjUsIDEsIDApCiAgKQpgYGAKCmBgYHtyIHNhdmUgZmlsZX0Kd3JpdGVfY3N2KGdlbmRlcl90ZXN0ZWQsICJkZW1vZ3JhcGhpY3NfaGFubmFoLmNzdiIpCmBgYAoK</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("making.gender.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
